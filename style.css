// ==========================================
// Overlay de Bienvenida
// ==========================================
function cerrarBienvenida() {
    const overlay = document.getElementById('bienvenida');
    overlay.style.opacity = 0; // Efecto de fade-out
    setTimeout(() => {
        overlay.style.display = 'none';
        document.getElementById('login-container').style.display = 'flex'; // Mostrar login
    }, 1500); // Tiempo debe coincidir con la transición de CSS
}

// ==========================================
// Registro y Login
// ==========================================
function registrarOLogin() {
    const usuario = document.getElementById('usuario').value.trim();
    const password = document.getElementById('password').value.trim();
    const mensaje = document.getElementById('mensaje');

    // Validar campos vacíos
    if(!usuario || !password) {
        mensaje.textContent = "Completa todos los campos";
        mensaje.style.color = "red";
        return;
    }

    const key = 'user_' + usuario;
    const datosGuardados = localStorage.getItem(key);

    if(datosGuardados) {
        // Login existente
        const userObj = JSON.parse(datosGuardados);
        if(userObj.password === password) {
            mensaje.textContent = "Login exitoso!";
            mensaje.style.color = "green";

            // Guardar usuario activo y redirigir
            localStorage.setItem('usuarioActivo', usuario);
            setTimeout(() => {
                window.location.href = 'lcdm.html'; // Página del álbum
            }, 1000);
        } else {
            mensaje.textContent = "Contraseña incorrecta";
            mensaje.style.color = "red";
        }
    } else {
        // Registro automático
        localStorage.setItem(key, JSON.stringify({usuario, password}));
        mensaje.textContent = "Registro exitoso!";
        mensaje.style.color = "green";

        // Guardar usuario activo y redirigir
        localStorage.setItem('usuarioActivo', usuario);
        setTimeout(() => {
            window.location.href = 'lcdm.html';
        }, 1000);
    }
}

// ==========================================
// Evento Enter para login/registro
// ==========================================
document.getElementById('password').addEventListener('keypress', function(e) {
    if(e.key === 'Enter') {
        registrarOLogin();
    }
});
document.getElementById('usuario').addEventListener('keypress', function(e) {
    if(e.key === 'Enter') {
        registrarOLogin();
    }
});
            // ==========================================
// Registro de Usuario
// ==========================================
const registroForm = document.getElementById('registroForm');
const mensaje = document.getElementById('mensaje');

registroForm.addEventListener('submit', function(e) {
    e.preventDefault(); // Evita que se recargue la página

    const usuario = document.getElementById('usuario').value.trim();
    const password = document.getElementById('password').value.trim();

    if (!usuario || !password) {
        mensaje.textContent = "Completa todos los campos";
        mensaje.style.color = "red";
        return;
    }

    const key = 'user_' + usuario;
    if (localStorage.getItem(key)) {
        mensaje.textContent = "Usuario ya registrado";
        mensaje.style.color = "red";
        return;
    }

    // Guardar usuario y contraseña en LocalStorage
    const datosUsuario = { usuario, password };
    localStorage.setItem(key, JSON.stringify(datosUsuario));

    mensaje.textContent = "Registro exitoso!";
    mensaje.style.color = "green";

    // Guardar usuario activo y redirigir al login
    localStorage.setItem('usuarioActivo', usuario);
    setTimeout(() => {
        window.location.href = 'login.html'; // Página de login
    }, 1500);
});

// =========================================


