<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ranking LCDM</title>
<link rel="stylesheet" href="style.css">
<style>
body { font-family: sans-serif; background:#111; color:#fff; text-align:center; }
#ranking-container { max-width:500px; margin:2rem auto; background:#222; padding:1rem; border-radius:10px; }
.ranking-item { display:flex; align-items:center; justify-content:space-between; padding:0.5rem 1rem; border-bottom:1px solid #444; cursor:pointer; }
.ranking-item img { width:40px; height:40px; border-radius:50%; margin-right:10px; object-fit:cover; border:1px solid gold; }
.ranking-item span { font-size:1.2rem; }
h1 { color:gold; text-shadow:0 0 5px #fff; }
#perfil-publico { display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:#222; color:#fff; padding:2rem; border-radius:15px; z-index:10000; width:300px; text-align:center; }
#perfil-publico img { width:80px; height:80px; border-radius:50%; border:2px solid gold; object-fit:cover; margin-bottom:10px; }
#perfil-publico button { padding:0.5rem 1rem; margin-top:1rem; border:none; border-radius:5px; background: gold; color:black; font-weight:bold; cursor:pointer; }
</style>
</head>
<body>

<h1>üèÜ Ranking LCDM</h1>
<div id="ranking-container"></div>
<a href="album.html" style="color:yellow;">‚¨ÖÔ∏è Volver al √Ålbum</a>

<!-- Overlay perfil p√∫blico -->
<div id="perfil-publico">
  <img id="perfilPublicoAvatar" src="">
  <h3 id="perfilPublicoNombre"></h3>
  <p id="perfilPublicoPuntos"></p>
  <p id="perfilPublicoBio"></p>
  <button id="cerrarPerfilPublico">Cerrar</button>
</div>

<script>
// Cargar ranking
let ranking = JSON.parse(localStorage.getItem('ranking')) || [];
let usuario = JSON.parse(localStorage.getItem('usuario'));
if(usuario && !ranking.find(u=>u.nombre===usuario.nombre)){
    ranking.push(usuario);
}
ranking.sort((a,b)=>b.puntos - a.puntos);

const contenedor = document.getElementById('ranking-container');
const perfilPublico = document.getElementById('perfil-publico');
const cerrarPerfilPublico = document.getElementById('cerrarPerfilPublico');
const perfilPublicoAvatar = document.getElementById('perfilPublicoAvatar');
const perfilPublicoNombre = document.getElementById('perfilPublicoNombre');
const perfilPublicoPuntos = document.getElementById('perfilPublicoPuntos');
const perfilPublicoBio = document.getElementById('perfilPublicoBio');

contenedor.innerHTML = '';
ranking.forEach((u,index)=>{
    const div=document.createElement('div');
    div.className='ranking-item';
    div.innerHTML=`
        <div style="display:flex; align-items:center;">
            <span>${index+1}.</span>
            <img src="${u.avatar}" alt="Avatar">
            <span>${u.nombre}</span>
        </div>
        <span>${u.puntos} pts</span>
    `;
    contenedor.appendChild(div);

    div.addEventListener('click', ()=>{
        if(u.publico){
            perfilPublicoAvatar.src = u.avatar;
            perfilPublicoNombre.textContent = u.nombre;
            perfilPublicoPuntos.textContent = u.puntos+" pts";
            perfilPublicoBio.textContent = u.bio || "";
            perfilPublico.style.display='block';
        } else {
            alert('Este perfil es privado');
        }
    });
});

cerrarPerfilPublico.addEventListener('click', ()=>perfilPublico.style.display='none');
</script>
</body>
</html>
