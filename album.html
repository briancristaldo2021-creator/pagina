<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Álbum LCDM</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#00ffff">
<style>
  body{font-family:sans-serif;background:#000;color:#fff;min-height:100vh;padding:20px}
  #top{display:flex;align-items:center;gap:12px}
  #figuritasContainer{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px;margin-top:18px}
  .figurita{background:#111;padding:10px;border-radius:8px;text-align:center}
  .btn{background:gold;color:#000;padding:8px 12px;border-radius:8px;border:none;cursor:pointer}
  a{color:lightblue}
</style>
</head>
<body>
<div id="top">
  <div id="usuarioArea"></div>
  <div style="margin-left:auto">
    <button class="btn" onclick="location.href='muro.html'">Ir al Muro</button>
    <button class="btn" onclick="location.href='ranking.html'">Ranking</button>
    <button class="btn" id="btnLogout">Cerrar sesión</button>
  </div>
</div>

<h2>Mi Colección</h2>
<div id="figuritasContainer"></div>

<script src="codigos.js"></script>
<script src="frontend-api.js"></script>
<script>
function getSessionUsuario(){
  const s = sessionStorage.getItem('lcdm_usuario');
  if(!s) return null;
  try{ return JSON.parse(s); } catch(e){ return null; }
}

const usuario = getSessionUsuario();
if(!usuario){ location.href='index.html'; }

document.getElementById('usuarioArea').innerHTML = `<img src="${usuario.avatar}" style="width:48px;height:48px;border-radius:50%;margin-right:8px;vertical-align:middle"> <strong>${usuario.usuario}</strong>`;
document.getElementById('btnLogout').addEventListener('click', ()=>{ sessionStorage.removeItem('lcdm_usuario'); location.href='index.html'; });

// Render figuritas (estáticas desde codigos.js)
const cont = document.getElementById('figuritasContainer');
figuritasData.forEach(f => {
  const div = document.createElement('div');
  div.className = 'figurita';
  div.innerHTML = `<img src="${f.imgBloqueada}" style="width:100%;height:120px;object-fit:cover;border-radius:6px"><h4>${f.nombre}</h4>`;
  cont.appendChild(div);
});
</script>
</body>
</html>
