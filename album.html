<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Álbum de Los LCDM</title>
<link rel="stylesheet" href="style.css">
<style>
  /* Estilo rápido para el botón QR */
  #btnScanQR {
      background:#ff00ff;
      color:#0d0d0d;
      border:none;
      padding:8px 16px;
      border-radius:6px;
      cursor:pointer;
      font-weight:bold;
      transition:all 0.3s;
  }
  #btnScanQR:hover { background:#990099; color:white; }
</style>
</head>
<body>

<!-- Logo arriba -->
<div id="logo-container">
    <a href="index.html">
        <img src="https://i.ibb.co/781Qj0J/logo.png" alt="Logo Los LCDM" id="logo">
    </a>
</div>

<!-- Barra superior -->
<div id="barra-superior">
    <span id="usuarioActivo"></span>
    <span id="contador">0 / 5 figuritas</span>
    <button id="btnReiniciar">Reiniciar Álbum</button>
    <button id="btnLogout">Cerrar Sesión</button>
</div>

<!-- Contenedor del álbum -->
<div id="album-container">
    <h1>Mi Álbum de Figuritas</h1>
    <div class="figuritas">
        <div class="figurita" id="fig1">Figurita 1</div>
        <div class="figurita" id="fig2">Figurita 2</div>
        <div class="figurita" id="fig3">Figurita 3</div>
        <div class="figurita" id="fig4">Figurita 4</div>
        <div class="figurita" id="fig5">Figurita 5</div>
    </div>
</div>

<!-- Botón para escanear QR -->
<div class="qr-section">
    <button id="btnScanQR">📷 Escanear QR</button>
    <div id="qr-reader" style="width:300px; margin-top:10px;"></div>
</div>

<!-- Librería HTML5 QR -->
<script src="https://unpkg.com/html5-qrcode/minified/html5-qrcode.min.js"></script>

<!-- Scripts -->
<script src="qr.js"></script>
<script src="script.js"></script>
<script>
  // Mostrar usuario activo
  const usuarioActivo = localStorage.getItem('usuarioActivo');
  if(!usuarioActivo) window.location.href='index.html';
  document.getElementById('usuarioActivo').textContent = usuarioActivo;

  // Botón cerrar sesión
  document.getElementById('btnLogout').addEventListener('click', () => {
      localStorage.removeItem('usuarioActivo');
      window.location.href = 'index.html';
  });

  // Botón reiniciar álbum
  document.getElementById('btnReiniciar').addEventListener('click', () => {
      const datos = JSON.parse(localStorage.getItem('user_'+usuarioActivo));
      datos.figuritas = [];
      localStorage.setItem('user_'+usuarioActivo, JSON.stringify(datos));
      mostrarAlbum();
  });

  // Inicializar álbum
  mostrarAlbum();
</script>
</body>
</html>
